---
layout: post
title:  Java BIO、NIO、AIO简介
description:
keywords: Java,IO
category: Java
tags: [Java,IO]
---

#### Java IO方式

Java IO的方式通常分为同步阻塞的BIO、同步非阻塞的NIO、异步非阻塞的AIO。JDK1.4之前只支持BIO，1.4后开始支持NIO，1.7开始支持AIO。

* 同步阻塞IO(BIO)

同步并阻塞，服务器实现模式为一个连接一个线程，即客户端有连接请求时服务器端就需要启动一个线程进行处理，如果这个连接不做任何事情会造成不必要的线程开销，可以通过线程池机制改善。

举例：自己去ATM排队取款，在前面的人取完之前，只能一直等待。

<!-- more -->

* 同步非阻塞IO(NIO)

 同步非阻塞，服务器实现模式为一个请求一个线程（使用单线程或者只使用少量的多线程，多个连接共用一个线程），即客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有I/O请求时才启动一个线程进行处理。用户进程需要时不时的询问IO操作是否就绪。NIO通常采用Reactor模式。

举例：柜台取款，取号后，你可以一直询问大堂经理是否轮到你，此时你可以做其他事。

* 异步非阻塞IO(AIO)

服务器实现模式为一个有效请求一个线程，客户端的I/O请求都是由OS先完成了再通知服务器应用去启动线程进行处理。用户进程只需要发起一个IO操作然后立即返回，等IO操作真正的完成以后，应用程序会得到IO操作完成的通知，此时用户进程只需要对数据进行处理就好了，不需要进行实际的IO读写操作，因为真正的IO读取或者写入操作已经由内核完成了。AIO通常采用Proactor模式。

举例：委托一小弟去柜台取款，然后给你。【使用异步IO时，Java将IO读写委托给OS处理，需要将数据缓冲区地址和大小传给OS(银行卡和密码)】

#### 适用场景

* BIO方式适用于连接数目比较小且固定的架构，这种方式对服务器资源要求比较高，并发局限于应用中，程序直观简单易理解。

* NIO方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程比较复杂。

* AIO方式使用于连接数目多且连接比较长（重操作）的架构，比如相册服务器，充分调用OS参与并发操作，编程比较复杂。
